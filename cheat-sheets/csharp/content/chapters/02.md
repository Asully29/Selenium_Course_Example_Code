# Cloud Configuration

## Sauce Labs

### Initial Setup

1. Store the browser/OS parameters
2. Pass them to a browser option object
3. Create an instance of `RemoteWebDriver` using Sauce Labs' end-point using the options object from #2
4. Store the instance in a field variable for use in your tests
5. Repeat for each browser you want to use on Sauce Labs

```csharp
BrowserName     = System.Environment.GetEnvironmentVariable("BROWSER_NAME") ?? "ie";
BrowserVersion  = System.Environment.GetEnvironmentVariable("BROWSER_VERSION") ?? "10.0";
PlatformName    = System.Environment.GetEnvironmentVariable("PLATFORM_NAME") ?? "Windows 8";
var sauceUsername = System.Environment.GetEnvironmentVariable("SAUCE_USERNAME");
var sauceAccessKey = System.Environment.GetEnvironmentVariable("SAUCE_ACCESS_KEY");
var url = new Uri($"http://{sauceUsername}:{sauceAccessKey}@ondemand.saucelabs.com:80/wd/hub");
ChromeOptions options = new ChromeOptions();
options.PlatformName = PlatformName;
options.BrowserVersion = BrowserVersion;
Driver = new RemoteWebDriver(url, options.ToCapabilities());
```

For more info see:

+ [Sauce Labs Available Platforms page](https://saucelabs.com/platforms)
+ [Sauce Labs Automated Test Configurator](https://docs.saucelabs.com/reference/platforms-configurator/#/)

### Setting the Test Name

1. Pull the test name out of NUnit's `TestContext`
2. Pass the name to Sauce Labs using the JavaScript executor

```csharp
var testName = TestContext.CurrentContext.Test.Name;
((IJavaScriptExecutor)Driver).ExecuteScript("sauce:job-name=" + testName);
```

### Setting the Job Status

1. Check the test result after the test completes
2. Use the JavaScript executor to pass the result onto Sauce Labs
3. BONUS POINTS: Output the Sauce Labs job URL to the console

```csharp
bool testPassed = TestContext.CurrentContext.Result.Outcome.Status.ToString() == "Passed";
((IJavaScriptExecutor)Driver).ExecuteScript("sauce:job-result=" + (testPassed ? "passed" : "failed"));
if(!testPassed)
{
    TestContext.WriteLine($"See a job at https://saucelabs.com/tests/{((RemoteWebDriver)Driver).SessionId}");
}
```


