# Prepping For Use

## Part 1: Global Setup & Teardown

`Base.java` in the `tests` package of the `src/test/java` directory.

```sh
.
├── pom.xml
├── src
│   └── test
│       └── java
│           ├── pageobjects
│           │   ├── Base.java
│           │   ├── DynamicLoading.java
│           │   └── Login.java
│           └── tests
│               ├── Base.java
│               ├── TestDynamicLoading.java
│               └── TestLogin.java
```

```java
// filename: tests/Base.java

package tests;

import org.junit.Rule;
import org.junit.rules.ExternalResource;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class Base {

    protected WebDriver driver;

    @Rule
    public ExternalResource resource = new ExternalResource() {

        @Override
        protected void before() throws Throwable {
            driver = new FirefoxDriver();
        }

        @Override
        protected void after() {
            driver.quit();
        }

    };

}
```

```java
// filename: tests/TestLogin.java
package tests;

import org.junit.Test;
import org.junit.Before;
import static org.junit.Assert.*;
import pageobjects.Login;

public class TestLogin extends Base {

    private Login login;

    @Before
    public void setUp() {
        login = new Login(driver);
    }

    @Test
    public void succeeded() {
        login.with("tomsmith", "SuperSecretPassword!");
        assertTrue("success message not present",
                login.successMessagePresent());
    }

    @Test
    public void failed() {
        login.with("tomsmith", "bad password");
        assertTrue("failure message wasn't present after providing bogus credentials",
                login.failureMessagePresent());
        assertFalse("success message was present after providing bogus credentials",
                login.successMessagePresent());
    }

}
```

```java
// filename: tests/TestDynamicLoading.java

package tests;

import org.junit.Test;
import org.junit.Before;
import static org.junit.Assert.*;
import pageobjects.DynamicLoading;

public class TestDynamicLoading extends Base {

    private DynamicLoading dynamicLoading;

    @Before
    public void setUp() {
        dynamicLoading = new DynamicLoading(driver);
    }

    @Test
    public void hiddenElementLoads() {
        dynamicLoading.loadExample("1");
        assertTrue("finish text didn't display after loading",
                dynamicLoading.finishTextPresent());
    }

    @Test
    public void elementAppears() {
        dynamicLoading.loadExample("2");
        assertTrue("finish text didn't render after loading",
                dynamicLoading.finishTextPresent());
    }

}
```

## Part 2: Base URL

`Config.java` in the `tests` package of the `src/test/java` directory

```sh
.
├── pom.xml
├── src
│   └── test
│       └── java
│           ├── pageobjects
│           │   ├── Base.java
│           │   ├── DynamicLoading.java
│           │   └── Login.java
│           └── tests
│               ├── Base.java
│               ├── Config.java
│               ├── TestDynamicLoading.java
│               └── TestLogin.java
```

```java
// filename: tests/Config.java
package tests;

public interface Config {
    final String baseUrl = System.getProperty("baseUrl", "http://the-internet.herokuapp.com");
}
```

```java
// filename: pageobjects/Base.java
...
public class Base implements Config {
...
    public void visit(String url) {
       if (url.contains("http"))  {
           driver.get(url);
       } else {
           driver.get(baseUrl + url);
       }
    }
...
```

## Running Everything

`mvn clean test -DbaseUrl=http://localhost:4567`
