# Dropdown Lists

Selecting from a dropdown list *seems* like one of those simple things. Just grab the list by its element and select one of its items based on the text you want.

While it sounds pretty straightforward, there is a bit more finessing to it than you may realize.

Let's take a look at a couple of different approaches.

## An Example

NOTE: You can see the example app we are using to test [here](http://the-internet.herokuapp.com/dropdown)

```ruby
require 'selenium-webdriver'
require 'rspec-expectations'

def setup
  @driver = Selenium::WebDriver.for :firefox
end

def teardown
  @driver.quit
end

def run
  setup
  yield
  teardown
end
```

First we load our libraries and wire up our setup, teardown, and run actions.

```ruby
run {
  @driver.get 'http://the-internet.herokuapp.com/dropdown'
  drop_down_list = @driver.find_element(id: 'dropdown')

  options = drop_down_list.find_elements(tag_name: 'option')
  options.each { |option| option.click if option.text == 'Option 1' }

  selected_option = options.map { |option| option.text if option.selected? }.join
  selected_option.include?('Option 1').should == true
}
```

Next we go to our example application, find the dropdown list by its ID, and store it in a variable. From this variable we are able to tease out all of its available options to click on -- storing them in a variable as well.

Grabbing the list's options returns a collection that we then iterate over. When the text matches what we want, we click on it.

And to polish things off, we check to see if our selection was made correctly by reiterating over the dropdown options collection, getting the text of the one that was selected, returning its text, storing it in a variable, and making an assertion against it.

While this works, there is a simpler, built-in way to do this within Selenium. Let's give that a go.


## A Far Better Example

```ruby
run do
  @driver.get 'http://the-internet.herokuapp.com/dropdown'

  dropdown = @driver.find_element(id: 'dropdown')
  select_list = Selenium::WebDriver::Support::Select.new(dropdown)
  select_list.select_by(:text, "Option 1")
end
```

Similar to the first example, we are finding the dropdown list by ID. But instead of iterating over it and clicking based on a conditional, we are leveraging a built-in helper function of Selenium, [Select](http://selenium.googlecode.com/svn-history/r15117/trunk/docs/api/rb/Selenium/WebDriver/Support/Select.html), and its [select_by](http://selenium.googlecode.com/svn-history/r15117/trunk/docs/api/rb/Selenium/WebDriver/Support/Select.html#select_by-instance_method) action.

In addition to selecting by text, we can also select by value. Like so...

```ruby
  select_list.select_by(:value, "1")
```

## Expected Behavior

Under the hood both of these approaches follow the same basic behavior:

+ Load the page
+ Find the dropdown list
+ Grab all elements in the list
+ Iterate through them
+ Click on the one that matches what we want
