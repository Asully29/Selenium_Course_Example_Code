# Checkboxes

Checkboxes, an often used element in web applications. But how do you work with them in your Selenium tests? Intuitively you may reach for a method that has the word 'checked' in it -- like `.checked?` or `.isChecked`. But this doesn't exist in Selenium. So how do you do it?

There are two ways to approach this -- through an element's 'checked' attribute (a.k.a. an attribute lookup), or by asking the element if it is selected.

Let's dig in with some examples.

## An Example

Below is the markup from the page we will testing against. It is taken from [a checkboxes example](http://the-internet.herokuapp.com/checkboxes) from [the-internet](https://github.com/tourdedave/the-internet).

```html
<form>
  <input type="checkbox"> unchecked<br>
  <input type="checkbox" checked=""> checked
</form>
```

We start our test off by pulling in the libraries we want to use (`selenium-webdriver` to drive the browser, and `rspec-expectations` & `RSpec::Matchers` to perform our assertions). After that, we wire up some simple `setup`, `teardown`, and `run` methods.

```ruby
# filename: checkboxes.rb
require 'selenium-webdriver'
require 'rspec-expectations'
include RSpec::Matchers

def setup
  @driver = Selenium::WebDriver.for :firefox
end

def teardown
  @driver.quit
end

def run
  setup
  yield
  teardown
end
```

Before we write any assertions, let's walk through both checkbox approaches to see what they give us.

To do that we'll want to grab all of the checkboxes on the page, and iterate through them twice. Once using an attribute lookup, and another asking if the element is selected. Each time outputting the return value we get from Selenium.

```ruby
run do
  @driver.get 'http://the-internet.herokuapp.com/checkboxes'
  checkboxes = @driver.find_elements(css: 'input[type="checkbox"]')

  puts "With .attribute('checked')"
  checkboxes.each { |checkbox| puts checkbox.attribute('checked').inspect }

  puts "\nWith .selected?"
  checkboxes.each { |checkbox| puts checkbox.selected?.inspect }
end
```

When we run it (e.g., `ruby checkboxes.rb`) , here's the output.

```sh
With .attribute('checked')
nil
"true"

With .selected?
false
true
```

With the attribute lookup, we receive either a `nil` or a string with the value `"true"` depending on the state of the checkbox. Whereas with `.selected?` we get a boolean response.

NOTE: Alternatively, you could have looked at the documentation for [`.attribute`](http://selenium.googlecode.com/git/docs/api/rb/Selenium/WebDriver/Element.html#attribute-instance_method) and [`.selected?`](http://selenium.googlecode.com/git/docs/api/rb/Selenium/WebDriver/Element.html#selected%3F-instance_method) to learn about this behavior. But it's nice to see it in action.

Let's see what these approaches look like when used to confirm that a checked checkbox is indeed checked.

```ruby
run do
  @driver.get 'http://the-internet.herokuapp.com/checkboxes'
  checkboxes = @driver.find_elements(css: 'input[type="checkbox"]')
  checkboxes.last.attribute('checked').should_not be_nil
end
```

With an attribute lookup, the simplest thing to do is to assert that the return value is not nil. While it works, it feels a bit off. Let's see what the other approach looks like.

```ruby
run do
  @driver.get 'http://the-internet.herokuapp.com/checkboxes'
  checkboxes = @driver.find_elements(css: 'input[type="checkbox"]')
  checkboxes.last.selected?.should be_true
end
```

This approach is much more understandable, and feels a bit more organic -- simply checking to see if the element has been selected.

## Expected Behavior

+ Load the page
+ Find all of the checkboxes
+ Assert that the last checkbox (the one that is supposed to be checked) is checked

## Outro

Attribute lookups are built for pulling information out of the page for review. While they work in this circumstance, you're probably better off reaching for `.selected?`.
