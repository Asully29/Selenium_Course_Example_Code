# Leveling Up Your Assertions

As we saw in Chapter 6, you can find an element and assert something about it (e.g., is it displayed). This is a good start, but there's a lot of opportunity for improvement since assertions like this can give you a false sense of security.

Sure, the element is there, but what does it look like? The application could be working fine from a functional perspective but appear broken to the user due to visual anomalies in the application.

This is where automated visual testing comes in.

## An Example

There are plenty of solutions out there for visual testing (you can see a list [here](https://applitools.com/blog/how-to-do-visual-testing-with-selenium)). I'm going to demonstrate using [Applitools Eyes](https://applitools.com).

__NOTE: You'll first need to sign up for an account. There's a free tier you can sign up for to get started. [Go here for details](https://applitools.com/users/register).__

```javascript
// filename: test/LoginTest.js
// ...
const { Eyes } = require('@applitools/eyes-selenium')

describe('Login', function() {
  this.timeout(30000)
  let driver
  let eyes

  beforeEach(async function() {
    const vendorDirectory =
      path.delimiter + path.join(__dirname, '..', 'vendor')
    process.env.PATH += vendorDirectory
    driver = await new Builder().forBrowser('firefox').build()
    eyes = new Eyes()
    eyes.setApiKey(process.env.APPLITOOLS_API_KEY)
    await eyes.open(driver, 'the-internet', this.currentTest.fullTitle(), {
      width: 1024,
      height: 768,
    })
  })
// ...
```

```javascript
// filename: test/logintest.js
// ...
  aftereach(async function() {
    await driver.quit()
    await eyes.abortifnotclosed()
  })
// ...
```

```javascript
// filename: test/logintest.js
// ...
  it('with valid credentials', async function() {
    await driver.get('http://the-internet.herokuapp.com/login')
    await eyes.checkWindow('Login')
    await driver.findElement({ id: 'username' }).sendKeys('tomsmith')
    await driver
      .findElement({ id: 'password' })
      .sendKeys('SuperSecretPassword!')
    await driver.findElement({ css: 'button' }).click()
    assert(
      await driver.findElement({ css: '.flash.success' }).isDisplayed(),
      'Success message not displayed'
    )
    await eyes.checkWindow('Logged in')
    await eyes.close()
  })
})
```
